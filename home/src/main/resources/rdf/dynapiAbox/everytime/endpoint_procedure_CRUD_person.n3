@prefix rdf:  			<http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:  			<http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl:   			<http://www.w3.org/2002/07/owl#> .
@prefix vitro: 			<http://vitro.mannlib.cornell.edu/ns/vitro/0.7#> .
@prefix dynapi: 		<https://vivoweb.org/ontology/vitro-dynamic-api#> .
@prefix dynapi_java: 	        <java:edu.cornell.mannlib.vitro.webapp.dynapi.components#> .
@prefix xsd: 			<http://www.w3.org/2001/XMLSchema#> .

###############################################
### N3 TEMPLATE PARTIAL ENTITY CREATION
###############################################

<https://vivoweb.org/procedure/create_person/execute_template/n3_template_subject>
        a                        		dynapi:N3Template ;
        rdfs:label               		"create person N3 Template"@en-US ;
        dynapi:hasModel 			<https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> ;
        dynapi:requiresParameter 		<https://vivoweb.org/procedure/person/parameter/uri> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/label> ;
        dynapi:N3TextAdditions   		
        """
                ?uri <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://xmlns.com/foaf/0.1/Person> ;
                <http://www.w3.org/2000/01/rdf-schema#label> ?label .
        """ .

<https://vivoweb.org/procedure/create_person/execute_template/n3_template_first_name>
        a                        		dynapi:N3Template ;
        rdfs:label               		"create person first name N3 Template"@en-US ;
        dynapi:hasModel 			<https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> ;
        dynapi:requiresParameter 		<https://vivoweb.org/procedure/person/parameter/uri> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/first_name> ;
        dynapi:N3TextAdditions   		"?uri <http://www.w3.org/2006/vcard/ns#givenName> ?first_name . " .

<https://vivoweb.org/procedure/create_person/execute_template/n3_template_middle_name>
        a                        		dynapi:N3Template ;
        rdfs:label               		"create person middle name N3 Template"@en-US ;
        dynapi:hasModel 			<https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> ;
        dynapi:requiresParameter 		<https://vivoweb.org/procedure/person/parameter/uri> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/middle_name> ;
        dynapi:N3TextAdditions   		"?uri <http://vivoweb.org/ontology/core#middleName> ?middle_name . " .

<https://vivoweb.org/procedure/create_person/execute_template/n3_template_last_name>
        a                        		dynapi:N3Template ;
        rdfs:label               		"create person last name N3 Template"@en-US ;
        dynapi:hasModel 			<https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> ;
        dynapi:requiresParameter 		<https://vivoweb.org/procedure/person/parameter/uri> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/last_name> ;
        dynapi:N3TextAdditions   		"?uri <http://www.w3.org/2006/vcard/ns#familyName> ?last_name . " .

<https://vivoweb.org/procedure/create_person/execute_template/n3_template_type>
        a                        		dynapi:N3Template ;
        rdfs:label               		"create person type N3 Template"@en-US ;
        dynapi:hasModel 			<https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> ;
        dynapi:requiresParameter 		<https://vivoweb.org/procedure/person/parameter/uri> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/type> ;
        dynapi:N3TextAdditions   		"?uri <http://vitro.mannlib.cornell.edu/ns/vitro/0.7#mostSpecificType> ?type . " .

<https://vivoweb.org/procedure/create_person/execute_template/n3_template_internal_id>
        a                        		dynapi:N3Template ;
        rdfs:label               		"create person internal id N3 Template"@en-US ;
        dynapi:hasModel 			<https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> ;
        dynapi:requiresParameter 		<https://vivoweb.org/procedure/person/parameter/uri> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/internalID> ;
        dynapi:N3TextAdditions   		"?uri <http://vivoweb.org/ontology/core#identifier> ?internalID . " .

<https://vivoweb.org/procedure/create_person/execute_template/n3_template_orcid>
        a                        		dynapi:N3Template ;
        rdfs:label               		"create person ORCID N3 Template"@en-US ;
        dynapi:hasModel 			<https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> ;
        dynapi:requiresParameter 		<https://vivoweb.org/procedure/person/parameter/uri> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/ORCID> ;
        dynapi:N3TextAdditions   		"?uri <http://vivoweb.org/ontology/core#orcidId> ?ORCID . " .

<https://vivoweb.org/procedure/create_person/execute_template/n3_template_scopus_id>
        a                        		dynapi:N3Template ;
        rdfs:label               		"create person SCOPUS author ID N3 Template"@en-US ;
        dynapi:hasModel 			<https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> ;
        dynapi:requiresParameter 		<https://vivoweb.org/procedure/person/parameter/uri> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/SCOPUSAuthorID> ;
        dynapi:N3TextAdditions   		"?uri <http://vivoweb.org/ontology/core#scopusId> ?SCOPUSAuthorID . " .

<https://vivoweb.org/procedure/create_person/execute_template/n3_template_researcher_id>
        a                        		dynapi:N3Template ;
        rdfs:label               		"create person researcher ID N3 Template"@en-US ;
        dynapi:hasModel 			<https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> ;
        dynapi:requiresParameter 		<https://vivoweb.org/procedure/person/parameter/uri> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/ResearcherID> ;
        dynapi:N3TextAdditions   		"?uri <http://vivoweb.org/ontology/core#researcherId> ?ResearcherID . " .

###############################################
### N3 TEMPLATE PARTIAL ENTITY UPDATE
###############################################

<https://vivoweb.org/procedure/update_person/execute_template/n3_template_subject>
        a                        		dynapi:N3Template ;
        rdfs:label               		"update person N3 Template"@en-US ;
        dynapi:hasModel 			<https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> ;
        dynapi:requiresParameter 		<https://vivoweb.org/procedure/person/parameter/resource_id> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/label> ;
        dynapi:N3TextAdditions   		
        """
                ?resource_id <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://xmlns.com/foaf/0.1/Person> ;
                <http://www.w3.org/2000/01/rdf-schema#label> ?label .
        """ .

<https://vivoweb.org/procedure/update_person/execute_template/n3_template_first_name>
        a                        		dynapi:N3Template ;
        rdfs:label               		"update person first name N3 Template"@en-US ;
        dynapi:hasModel 			<https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> ;
        dynapi:requiresParameter 		<https://vivoweb.org/procedure/person/parameter/resource_id>  ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/first_name> ;
        dynapi:N3TextAdditions   		"?resource_id <http://www.w3.org/2006/vcard/ns#givenName> ?first_name . " .

<https://vivoweb.org/procedure/update_person/execute_template/n3_template_middle_name>
        a                        		dynapi:N3Template ;
        rdfs:label               		"update person middle name N3 Template"@en-US ;
        dynapi:hasModel 			<https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> ;
        dynapi:requiresParameter 		<https://vivoweb.org/procedure/person/parameter/resource_id> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/middle_name> ;
        dynapi:N3TextAdditions   		"?resource_id <http://vivoweb.org/ontology/core#middleName> ?middle_name . " .

<https://vivoweb.org/procedure/update_person/execute_template/n3_template_last_name>
        a                        		dynapi:N3Template ;
        rdfs:label               		"update person last name N3 Template"@en-US ;
        dynapi:hasModel 			<https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> ;
        dynapi:requiresParameter 		<https://vivoweb.org/procedure/person/parameter/resource_id> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/last_name> ;
        dynapi:N3TextAdditions   		"?resource_id <http://www.w3.org/2006/vcard/ns#familyName> ?last_name . " .

<https://vivoweb.org/procedure/update_person/execute_template/n3_template_type>
        a                        		dynapi:N3Template ;
        rdfs:label               		"update person type N3 Template"@en-US ;
        dynapi:hasModel 			<https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> ;
        dynapi:requiresParameter 		<https://vivoweb.org/procedure/person/parameter/resource_id> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/type> ;
        dynapi:N3TextAdditions   		"?resource_id <http://vitro.mannlib.cornell.edu/ns/vitro/0.7#mostSpecificType> ?type . " .

<https://vivoweb.org/procedure/update_person/execute_template/n3_template_internal_id>
        a                        		dynapi:N3Template ;
        rdfs:label               		"update person internal id N3 Template"@en-US ;
        dynapi:hasModel 			<https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> ;
        dynapi:requiresParameter 		<https://vivoweb.org/procedure/person/parameter/resource_id> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/internalID> ;
        dynapi:N3TextAdditions   		"?resource_id <http://vivoweb.org/ontology/core#identifier> ?internalID . " .

<https://vivoweb.org/procedure/update_person/execute_template/n3_template_orcid>
        a                        		dynapi:N3Template ;
        rdfs:label               		"update person ORCID N3 Template"@en-US ;
        dynapi:hasModel 			<https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> ;
        dynapi:requiresParameter 		<https://vivoweb.org/procedure/person/parameter/resource_id> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/ORCID> ;
        dynapi:N3TextAdditions   		"?resource_id <http://vivoweb.org/ontology/core#orcidId> ?ORCID . " .

<https://vivoweb.org/procedure/update_person/execute_template/n3_template_scopus_id>
        a                        		dynapi:N3Template ;
        rdfs:label               		"update person SCOPUS author ID N3 Template"@en-US ;
        dynapi:hasModel 			<https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> ;
        dynapi:requiresParameter 		<https://vivoweb.org/procedure/person/parameter/resource_id> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/SCOPUSAuthorID> ;
        dynapi:N3TextAdditions   		"?resource_id <http://vivoweb.org/ontology/core#scopusId> ?SCOPUSAuthorID . " .

<https://vivoweb.org/procedure/update_person/execute_template/n3_template_researcher_id>
        a                        		dynapi:N3Template ;
        rdfs:label               		"update person researcher ID N3 Template"@en-US ;
        dynapi:hasModel 			<https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> ;
        dynapi:requiresParameter 		<https://vivoweb.org/procedure/person/parameter/resource_id> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/ResearcherID> ;
        dynapi:N3TextAdditions   		"?resource_id <http://vivoweb.org/ontology/core#researcherId> ?ResearcherID . " .

###############################################
### CREATE
###############################################

<https://vivoweb.org/procedure/create_person>
        a                        		dynapi:Procedure ;
        rdfs:label               		"Create a person"@en-US ;
        dynapi:accessWhitelist                  <https://vivoweb.org/procedure/person/access/admin> ;
        dynapi:hasFirstStep 			<https://vivoweb.org/procedure/create_person/creation_properties/step1> ;
        dynapi:providesParameter                <https://vivoweb.org/procedure/person/parameter/uri>  .

<https://vivoweb.org/procedure/create_person/creation_properties/step1>
        a                        		dynapi:OperationalStep ;
        rdfs:label               		"creation of a person step 1"@en-US ;
        dynapi:hasOperation 			<https://vivoweb.org/procedure/create_person/execute_template/n3_template_subject> ;
	dynapi:hasNextStep			<https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step2> .

<https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step2>
        a                                       dynapi:ConditionalStep ;
        rdfs:label                              "conditional step for person first name check"@en-US ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/create_person/creation_properties/step2> ;
        dynapi:nextIfNotSatisfied               <https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step3> ;
        dynapi:hasCondition                     <https://vivoweb.org/condition/person/first_name_check> .

<https://vivoweb.org/procedure/create_person/creation_properties/step2>
        a                        		dynapi:OperationalStep ;
        rdfs:label               		"creation of a person step 2"@en-US ;
        dynapi:hasOperation 			<https://vivoweb.org/procedure/create_person/execute_template/n3_template_first_name> ;
	dynapi:hasNextStep			<https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step3> .

<https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step3>
        a                                       dynapi:ConditionalStep ;
        rdfs:label                              "conditional step for person middle name check"@en-US ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/create_person/creation_properties/step3> ;
        dynapi:nextIfNotSatisfied               <https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step4> ;
        dynapi:hasCondition                     <https://vivoweb.org/condition/person/middle_name_check> .

<https://vivoweb.org/procedure/create_person/creation_properties/step3>
        a                        		dynapi:OperationalStep ;
        rdfs:label               		"creation of a person step 3"@en-US ;
        dynapi:hasOperation 			<https://vivoweb.org/procedure/create_person/execute_template/n3_template_middle_name> ;
	dynapi:hasNextStep			<https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step4> .

<https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step4>
        a                                       dynapi:ConditionalStep ;
        rdfs:label                              "conditional step for person last name check"@en-US ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/create_person/creation_properties/step4> ;
        dynapi:nextIfNotSatisfied               <https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step5> ;
        dynapi:hasCondition                     <https://vivoweb.org/condition/person/last_name_check> .

<https://vivoweb.org/procedure/create_person/creation_properties/step4>
        a                        		dynapi:OperationalStep ;
        rdfs:label               		"creation of a person step 4"@en-US ;
        dynapi:hasOperation 			<https://vivoweb.org/procedure/create_person/execute_template/n3_template_last_name> ;
	dynapi:hasNextStep			<https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step5> .

<https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step5>
        a                                       dynapi:ConditionalStep ;
        rdfs:label                              "conditional step for person type check"@en-US ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/create_person/creation_properties/step5> ;
        dynapi:nextIfNotSatisfied               <https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step6> ;
        dynapi:hasCondition                     <https://vivoweb.org/condition/person/type_check> .

<https://vivoweb.org/procedure/create_person/creation_properties/step5>
        a                        		dynapi:OperationalStep ;
        rdfs:label               		"creation of a person step 5"@en-US ;
        dynapi:hasOperation 			<https://vivoweb.org/procedure/create_person/execute_template/n3_template_type> ;
	dynapi:hasNextStep			<https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step6> .

<https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step6>
        a                                       dynapi:ConditionalStep ;
        rdfs:label                              "conditional step for person internal id check"@en-US ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/create_person/creation_properties/step6> ;
        dynapi:nextIfNotSatisfied               <https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step7> ;
        dynapi:hasCondition                     <https://vivoweb.org/condition/person/internal_id_check> .

<https://vivoweb.org/procedure/create_person/creation_properties/step6>
        a                        		dynapi:OperationalStep ;
        rdfs:label               		"creation of a person step 6"@en-US ;
        dynapi:hasOperation 			<https://vivoweb.org/procedure/create_person/execute_template/n3_template_internal_id> ;
	dynapi:hasNextStep			<https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step7> .

<https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step7>
        a                                       dynapi:ConditionalStep ;
        rdfs:label                              "conditional step for person ORCID check"@en-US ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/create_person/creation_properties/step7> ;
        dynapi:nextIfNotSatisfied               <https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step8> ;
        dynapi:hasCondition                     <https://vivoweb.org/condition/person/orcid_check> .

<https://vivoweb.org/procedure/create_person/creation_properties/step7>
        a                        		dynapi:OperationalStep ;
        rdfs:label               		"creation of a person step 7"@en-US ;
        dynapi:hasOperation 			<https://vivoweb.org/procedure/create_person/execute_template/n3_template_orcid> ;
	dynapi:hasNextStep			<https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step8> .

<https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step8>
        a                                       dynapi:ConditionalStep ;
        rdfs:label                              "conditional step for person first name check"@en-US ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/create_person/creation_properties/step8> ;
        dynapi:nextIfNotSatisfied               <https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step9> ;
        dynapi:hasCondition                     <https://vivoweb.org/condition/person/scopus_author_id_check> .

<https://vivoweb.org/procedure/create_person/creation_properties/step8>
        a                        		dynapi:OperationalStep ;
        rdfs:label               		"creation of a person step 8"@en-US ;
        dynapi:hasOperation 			<https://vivoweb.org/procedure/create_person/execute_template/n3_template_scopus_id> ;
	dynapi:hasNextStep			<https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step9> .

<https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step9>
        a                                       dynapi:ConditionalStep ;
        rdfs:label                              "conditional step for person researcher ID check"@en-US ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/create_person/creation_properties/step9> ;
        dynapi:hasCondition                     <https://vivoweb.org/condition/person/researcher_id_check> .

<https://vivoweb.org/procedure/create_person/creation_properties/step9>
        a                        		dynapi:OperationalStep ;
        rdfs:label               		"creation of a person step 9"@en-US ;
        dynapi:hasOperation 			<https://vivoweb.org/procedure/create_person/execute_template/n3_template_researcher_id> ;
        dynapi:hasNextStep			<https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step10> .

<https://vivoweb.org/procedure/create_person/creation_properties/conditional_for_step10>
        a                                       dynapi:ConditionalStep ;
        rdfs:label                              "conditional step for person positions check"@en-US ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/create_person/creation_properties/step10> ;
        dynapi:hasCondition                     <https://vivoweb.org/condition/person/positions_check> .

<https://vivoweb.org/procedure/assign_generated_uri/substitution>
        a                                       dynapi:ParameterSubstitution ;
        dynapi:substitutionSource               <https://vivoweb.org/procedure/person/parameter/uri> ;
        dynapi:substitutionTarget               <https://vivoweb.org/procedure/person/parameter/current_uri_persisted> .

<https://vivoweb.org/procedure/create_person/creation_properties/step10>
        a                                       dynapi:OperationalStep ;
        dynapi:hasParameterSubstitution         <https://vivoweb.org/procedure/assign_generated_uri/substitution> ;
        dynapi:hasOperation                     <https://vivoweb.org/procedure/create_person/create_person_positions/loop> ;
        rdfs:label                              "Create provided person positions"@en-US .

## Loop start

<https://vivoweb.org/procedure/create_person/create_person_positions/loop>
        a                                       dynapi:LoopOperation ;
        #get positions from array
        dynapi:inputDescriptor                  <https://vivoweb.org/procedure/create_person/create_person_positions/input_descriptor> ;
        dynapi:conditionDescriptor              <https://vivoweb.org/procedure/create_person/create_person_positions/condition_descriptor> ;
        
        dynapi:outputDescriptor                 <https://vivoweb.org/procedure/create_person/create_person_positions/output_descriptor> ;
        dynapi:executableDescriptor             <https://vivoweb.org/procedure/create_person/create_person_positions/executable_descriptor> ;
        
        dynapi:internalParameter                <https://vivoweb.org/procedure/create_person/parameter/iteration_int_param> ;
        
        dynapi:internalParameter                <https://vivoweb.org/procedure/get_position_from_container/parameter/container_positions_item> ;
        dynapi:providesParameter                <https://vivoweb.org/procedure/get_position_from_container/parameter/container_positions_item> .

<https://vivoweb.org/procedure/create_person/create_person_positions/input_descriptor>
        a                                       dynapi:ProcedureDescriptor ;
        dynapi:providesParameter                <https://vivoweb.org/procedure/get_position_from_container/parameter/container_positions_item> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/create_person/parameter/iteration_int_param> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/container/positions> ;
        dynapi:call                             <https://vivoweb.org/procedure/get_position_from_container> .

<https://vivoweb.org/procedure/create_person/create_person_positions/condition_descriptor>
        a                                       dynapi:ProcedureDescriptor ;
        dynapi:providesParameter                <https://vivoweb.org/parameter/expected_int_result_1> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/create_person/parameter/iteration_int_param> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/container/positions> ;
        dynapi:call                             <https://vivoweb.org/procedure/contains_position_item> .
        
<https://vivoweb.org/procedure/create_person/create_person_positions/output_descriptor>
        a                                       dynapi:ProcedureDescriptor ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/create_person/parameter/iteration_int_param> ;
        dynapi:providesParameter                <https://vivoweb.org/procedure/create_person/parameter/iteration_int_param> ;
        dynapi:call                             <https://vivoweb.org/procedure/increment_iterator> . 

<https://vivoweb.org/procedure/increment_iterator>
        a                                       dynapi:Procedure ;
        dynapi:providesParameter                <https://vivoweb.org/procedure/create_person/parameter/iteration_int_param> ;
        dynapi:hasFirstStep                     <https://vivoweb.org/procedure/increment_iterator/step> .
        
<https://vivoweb.org/procedure/increment_iterator/step>
        a                                       dynapi:OperationalStep ;
        dynapi:hasOperation                     <https://vivoweb.org/procedure/increment_iterator/sumOperation> .
        
<https://vivoweb.org/procedure/increment_iterator/sumOperation>
	a                                       dynapi:SumOperation ;
	dynapi:requiresParameter                <https://vivoweb.org/procedure/create_person/parameter/iteration_increment_param> ;
	dynapi:requiresParameter                <https://vivoweb.org/procedure/create_person/parameter/iteration_int_param> ;
	dynapi:providesParameter                <https://vivoweb.org/procedure/create_person/parameter/iteration_int_param> .

<https://vivoweb.org/procedure/create_person/create_person_positions/executable_descriptor>
        a                                       dynapi:ProcedureDescriptor ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/create_person_position/parameter/current_step_uri> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/get_position_from_container/parameter/container_positions_item> ;
        dynapi:call                             <https://vivoweb.org/procedure/add_person_position> .  

## Loop end

############################################################
#Get position from a container 

<https://vivoweb.org/procedure/get_position_from_container>
        a                                       dynapi:Procedure ;
        dynapi:hasFirstStep                     <https://vivoweb.org/procedure/get_position_from_container/step> ;
        dynapi:providesParameter                <https://vivoweb.org/procedure/get_position_from_container/parameter/container_positions_item> .
        
<https://vivoweb.org/procedure/get_position_from_container/step> 
        a                                       dynapi:OperationalStep ;
        dynapi:hasOperation                     <https://vivoweb.org/procedure/get_position_from_container/operation> .
        
<https://vivoweb.org/procedure/get_position_from_container/operation>
 	a                                       dynapi:ContainerQuery ;
 	dynapi:providesParameter                <https://vivoweb.org/procedure/get_position_from_container/parameter/container_positions_item> ;
 	dynapi:targetContainer                  <https://vivoweb.org/procedure/person/parameter/container/positions> ;
 	dynapi:requiresParameter                <https://vivoweb.org/procedure/create_person/parameter/iteration_int_param> .

############################################################
#Condition procedure

<https://vivoweb.org/procedure/contains_position_item>
        a                                       dynapi:Procedure ;
        dynapi:providesParameter                <https://vivoweb.org/parameter/default_condition_0_int> ;
        dynapi:hasFirstStep                     <https://vivoweb.org/procedure/contains_position_item/conditional_step> .
        
<https://vivoweb.org/procedure/contains_position_item/conditional_step>
        a                                       dynapi:ConditionalStep ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/contains_position_item/condition_satisfied_step> ;
        dynapi:hasCondition                     <https://vivoweb.org/procedure/contains_position_item/condition_container_contains> .
        
<https://vivoweb.org/procedure/contains_position_item/condition_satisfied_step>
        a                                       dynapi:OperationalStep ;
        dynapi:hasOperation                     <https://vivoweb.org/procedure/contains_position_item/addOperation> .
        
<https://vivoweb.org/procedure/contains_position_item/addOperation>
	a                                       dynapi:SumOperation ;
	dynapi:requiresParameter                <https://vivoweb.org/parameter/add_int_1_param> ;
	dynapi:requiresParameter                <https://vivoweb.org/parameter/default_condition_0_int> ;
	dynapi:providesParameter                <https://vivoweb.org/parameter/default_condition_0_int> .

<https://vivoweb.org/procedure/contains_position_item/condition_container_contains> 
        a                                       dynapi:ConditionContainerContains ;
        dynapi:targetContainer                  <https://vivoweb.org/procedure/person/parameter/container/positions> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/create_person/parameter/iteration_int_param> .

############################################################
#Add person position construct query

<https://vivoweb.org/procedure/add_person_position>
        a                                       dynapi:Procedure ;
        dynapi:hasFirstStep                     <https://vivoweb.org/procedure/contains_organisation_unit_uri_key/conditional_step> .

<https://vivoweb.org/procedure/contains_organisation_unit_uri_key/conditional_step>
        a                                       dynapi:ConditionalStep ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/get_organisation_unit_uri/step> ;
        dynapi:nextIfNotSatisfied               <https://vivoweb.org/procedure/contains_organisation_unit_name_key/conditional_step> ;
        dynapi:hasCondition                     <https://vivoweb.org/procedure/contains_organisation_unit_uri_key/condition_container_contains> .

<https://vivoweb.org/procedure/get_organisation_unit_uri/step>
        a                                       dynapi:OperationalStep ;
        dynapi:hasNextStep                      <https://vivoweb.org/procedure/contains_organisation_unit_name_key/conditional_step> ;
        dynapi:hasOperation                     <https://vivoweb.org/procedure/get_organisation_unit_uri/operation> .

<https://vivoweb.org/procedure/get_organisation_unit_uri/operation>
        a                                       dynapi:ContainerQuery ;
        dynapi:targetContainer                  <https://vivoweb.org/procedure/get_position_from_container/parameter/container_positions_item> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/create_person_position/parameter/organizationUnitURI_key> ;
        dynapi:providesParameter                <https://vivoweb.org/procedure/position/parameter/organizationUnitURI> .

<https://vivoweb.org/procedure/contains_organisation_unit_name_key/conditional_step>
        a                                       dynapi:ConditionalStep ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/get_organisation_unit_name/step> ;
        dynapi:nextIfNotSatisfied               <https://vivoweb.org/procedure/contains_position_name_key/conditional_step> ;
        dynapi:hasCondition                     <https://vivoweb.org/procedure/contains_organisation_unit_name_key/condition_container_contains> .

<https://vivoweb.org/procedure/get_organisation_unit_name/step>
        a                                       dynapi:OperationalStep ;
        dynapi:hasNextStep                      <https://vivoweb.org/procedure/contains_position_name_key/conditional_step> ;
        dynapi:hasOperation                     <https://vivoweb.org/procedure/get_organisation_unit_name/operation> .

<https://vivoweb.org/procedure/get_organisation_unit_name/operation>
        a                                       dynapi:ContainerQuery ;
        dynapi:targetContainer                  <https://vivoweb.org/procedure/get_position_from_container/parameter/container_positions_item> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/create_person_position/parameter/organizationUnitName_key> ;
        dynapi:providesParameter                <https://vivoweb.org/procedure/position/parameter/organizationUnitName> .

<https://vivoweb.org/procedure/contains_position_name_key/conditional_step>
        a                                       dynapi:ConditionalStep ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/get_position_name/step> ;
        dynapi:nextIfNotSatisfied               <https://vivoweb.org/procedure/contains_position_type_key/conditional_step> ;
        dynapi:hasCondition                     <https://vivoweb.org/procedure/contains_position_name_key/condition_container_contains> .

<https://vivoweb.org/procedure/get_position_name/step>
        a                                       dynapi:OperationalStep ;
        dynapi:hasNextStep                      <https://vivoweb.org/procedure/contains_position_type_key/conditional_step>  ;
        dynapi:hasOperation                     <https://vivoweb.org/procedure/get_position_name/operation> .

<https://vivoweb.org/procedure/get_position_name/operation>
        a                                       dynapi:ContainerQuery ;
        dynapi:targetContainer                  <https://vivoweb.org/procedure/get_position_from_container/parameter/container_positions_item> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/create_person_position/parameter/positionName_key> ;
        dynapi:providesParameter                <https://vivoweb.org/procedure/position/parameter/positionName> .

<https://vivoweb.org/procedure/contains_position_type_key/conditional_step>
        a                                       dynapi:ConditionalStep ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/get_position_type/step> ;
        dynapi:nextIfNotSatisfied               <https://vivoweb.org/procedure/contains_start_date_key/conditional_step> ;
        dynapi:hasCondition                     <https://vivoweb.org/procedure/contains_position_type_key/condition_container_contains> .

<https://vivoweb.org/procedure/get_position_type/step>
        a                                       dynapi:OperationalStep ;
        dynapi:hasNextStep                      <https://vivoweb.org/procedure/contains_start_date_key/conditional_step> ;
        dynapi:hasOperation                     <https://vivoweb.org/procedure/get_position_type/operation> .

<https://vivoweb.org/procedure/get_position_type/operation>
        a                                       dynapi:ContainerQuery ;
        dynapi:targetContainer                  <https://vivoweb.org/procedure/get_position_from_container/parameter/container_positions_item> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/create_person_position/parameter/positionType_key> ;
        dynapi:providesParameter                <https://vivoweb.org/procedure/position/parameter/positionType> .

<https://vivoweb.org/procedure/contains_start_date_key/conditional_step>
        a                                       dynapi:ConditionalStep ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/get_start_date/step> ;
        dynapi:nextIfNotSatisfied               <https://vivoweb.org/procedure/contains_end_date_key/conditional_step> ;
        dynapi:hasCondition                     <https://vivoweb.org/procedure/contains_start_date_key/condition_container_contains> .

<https://vivoweb.org/procedure/get_start_date/step>
        a                                       dynapi:OperationalStep ;
        dynapi:hasNextStep                      <https://vivoweb.org/procedure/contains_end_date_key/conditional_step> ;
        dynapi:hasOperation                     <https://vivoweb.org/procedure/get_start_date/operation> .

<https://vivoweb.org/procedure/get_start_date/operation>
        a                                       dynapi:ContainerQuery ;
        dynapi:targetContainer                  <https://vivoweb.org/procedure/get_position_from_container/parameter/container_positions_item> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/create_person_position/parameter/startDate_key> ;
        dynapi:providesParameter                <https://vivoweb.org/procedure/position/parameter/startDate> .

<https://vivoweb.org/procedure/contains_end_date_key/conditional_step>
        a                                       dynapi:ConditionalStep ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/get_end_date/step> ;
        dynapi:nextIfNotSatisfied               <https://vivoweb.org/procedure/position_construct_query_fill_in/step> ;
        dynapi:hasCondition                     <https://vivoweb.org/procedure/contains_end_date_key/condition_container_contains> .

<https://vivoweb.org/procedure/get_end_date/step>
        a                                       dynapi:OperationalStep ;
        dynapi:hasNextStep                      <https://vivoweb.org/procedure/position_construct_query_fill_in/step> ;
        dynapi:hasOperation                     <https://vivoweb.org/procedure/get_end_date/operation> .

<https://vivoweb.org/procedure/get_end_date/operation>
        a                                       dynapi:ContainerQuery ;
        dynapi:targetContainer                  <https://vivoweb.org/procedure/get_position_from_container/parameter/container_positions_item> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/create_person_position/parameter/endDate_key> ;
        dynapi:providesParameter                <https://vivoweb.org/procedure/position/parameter/endDate> .

<https://vivoweb.org/procedure/position_construct_query_fill_in/step>
        a                                       dynapi:OperationalStep ;
        dynapi:hasNextStep                      <https://vivoweb.org/procedure/bind_position_construct_query/step> ;
        dynapi:hasOperation                     <https://vivoweb.org/procedure/position_construct_query_fill_in/operation> .

<https://vivoweb.org/procedure/position_construct_query_fill_in/operation>
        a                                       dynapi:N3Template ;
        dynapi:hasModel                         <https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/position/parameter/organizationUnitURI>  ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/position/parameter/organizationUnitName> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/position/parameter/positionName> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/position/parameter/positionType> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/position/parameter/startDate> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/position/parameter/endDate> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/create_person_position/parameter/current_step_uri> ;
        dynapi:N3TextAdditions              
        """
        @prefix dynapi: <https://vivoweb.org/ontology/vitro-dynamic-api#> .
        @prefix rdfs:  <http://www.w3.org/2000/01/rdf-schema#> .
        
        ?current_step_uri <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://vivoweb.org/ontology/core#Position> ;
                <http://vivoweb.org/ontology/core#Position> ?positionType ;
                <http://xmlns.com/foaf/0.1/Organization> ?organizationUnitURI ;
                <http://vivoweb.org/ontology/core#start> ?startDate ;
                <http://vivoweb.org/ontology/core#end> ?endDate .
        
        """ .

<https://vivoweb.org/procedure/bind_position_construct_query/step>
        a                                       dynapi:OperationalStep ;
        dynapi:hasOperation                     <https://vivoweb.org/procedure/bind_position_construct_query/operation> .

<https://vivoweb.org/procedure/bind_position_construct_query/operation>
        a                                       dynapi:N3Template ;
        dynapi:hasModel                         <https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/current_uri_persisted> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/create_person_position/parameter/current_step_uri> ;
        dynapi:N3TextAdditions              
        """
        @prefix dynapi: <https://vivoweb.org/ontology/vitro-dynamic-api#> .
        @prefix rdfs:  <http://www.w3.org/2000/01/rdf-schema#> .
        
        ?current_uri_persisted <http://vivoweb.org/ontology/core#Position> ?current_step_uri .
        
        """ .

###############################################
### READ (all)
###############################################

<https://vivoweb.org/procedure/read_persons>
        a                                       dynapi:Procedure ;
        rdfs:label                              "Fetching persons"@en-US ;
        dynapi:accessWhitelist                  <https://vivoweb.org/procedure/person/access/admin> ;
        dynapi:providesParameter                <https://vivoweb.org/ontology/person/parameter/persons> ;
        dynapi:providesParameter 		<https://vivoweb.org/ontology/person/parameter/count>;
        dynapi:hasFirstStep 			<https://vivoweb.org/procedure/read_persons/fetching_properties/step> .

<https://vivoweb.org/procedure/read_persons/fetching_properties/step>
        a                                       dynapi:OperationalStep ;
        rdfs:label                              "fetch persons step"@en-US ;
        dynapi:hasOperation 		        <https://vivoweb.org/procedure/read_persons/fetching_properties/sparql_select_query> ;
	dynapi:hasNextStep			<https://vivoweb.org/procedure/read_persons/statistics/step> .

<https://vivoweb.org/procedure/read_persons/fetching_properties/sparql_select_query>
        a                                       dynapi:SparqlSelectQuery ;
        rdfs:label                              "read persons sparql query"@en-US ;
        dynapi:hasModel 			<https://vivoweb.org/ontology/vitro-dynamic-api/model/full_union> ;
        dynapi:providesParameter 		<https://vivoweb.org/ontology/person/parameter/persons> ;
        dynapi:requiresPlainParameter 	        <https://vivoweb.org/ontology/person/parameter/limit> ;
        dynapi:requiresPlainParameter           <https://vivoweb.org/ontology/person/parameter/offset> ;
        dynapi:requiresPlainParameter           <https://vivoweb.org/ontology/person/parameter/sortBy> ;
        dynapi:requiresPlainParameter           <https://vivoweb.org/ontology/person/parameter/order> ;
        dynapi:sparqlQueryText
        """
        SELECT ?uri ?type ?label ?first_name ?middle_name ?last_name ?internalID ?ORCID ?SCOPUSAuthorID ?ResearcherID ?positionURI ?organizationUnitURI ?positionName ?positionType ?startDate ?endDate
        WHERE {
                ?uri a <http://xmlns.com/foaf/0.1/Person> .
                OPTIONAL { ?uri <http://www.w3.org/2006/vcard/ns#givenName> ?first_name }
                OPTIONAL { ?uri <http://vivoweb.org/ontology/core#middleName> ?middle_name }
                OPTIONAL { ?uri <http://www.w3.org/2006/vcard/ns#familyName> ?last_name }
                OPTIONAL { ?uri <http://www.w3.org/2000/01/rdf-schema#label> ?label }
                OPTIONAL { ?uri <http://vivoweb.org/ontology/core#identifier> ?internalID }
                OPTIONAL { ?uri <http://vivoweb.org/ontology/core#orcidId> ?ORCID }
                OPTIONAL { ?uri <http://vivoweb.org/ontology/core#scopusId> ?SCOPUSAuthorID }
                OPTIONAL { ?uri <http://vivoweb.org/ontology/core#researcherId> ?ResearcherID }
                OPTIONAL {
                        ?uri <http://vivoweb.org/ontology/core#Position> ?positionURI .
                        ?positionURI <http://xmlns.com/foaf/0.1/Organization> ?organizationUnitURI .
                        ?positionURI <http://vivoweb.org/ontology/core#positionInOrganization> ?positionName .
                        ?positionURI <http://vivoweb.org/ontology/core#Position> ?positionType .
                        ?positionURI <http://vivoweb.org/ontology/core#start> ?startDate .
                        ?positionURI <http://vivoweb.org/ontology/core#end> ?endDate .
                }
        }
        ORDER BY ?label
        LIMIT ?limit OFFSET ?offset

        """ .

<https://vivoweb.org/procedure/read_persons/statistics/step>
        a                                       dynapi:OperationalStep ;
        rdfs:label                              "number of persons step "@en-US ;
        dynapi:hasOperation 		        <https://vivoweb.org/procedure/read_persons/statistics/sparql_query> .

<https://vivoweb.org/procedure/read_persons/statistics/sparql_query>
        a                                       dynapi:SparqlSelectQuery ;
        rdfs:label                              "number of persons sparql query 1"@en-US ;
        dynapi:hasModel 		        <https://vivoweb.org/ontology/vitro-dynamic-api/model/full_union> ;
        dynapi:providesParameter 	        <https://vivoweb.org/ontology/person/parameter/count> ;
        dynapi:sparqlQueryText
        """
        SELECT (count(distinct ?uri) as ?count)
            WHERE
                {
                    ?uri <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://xmlns.com/foaf/0.1/Person>
                }
        """ .

###############################################
### READ (one)
###############################################

<https://vivoweb.org/procedure/read_person>
        a                                       dynapi:Procedure ;
        rdfs:label                              "Fetching a person"@en-US ;
        dynapi:accessWhitelist                  <https://vivoweb.org/procedure/person/access/admin> ;
        dynapi:providesParameter 	        <https://vivoweb.org/ontology/person/parameter/persons> ;
        dynapi:hasFirstStep 		        <https://vivoweb.org/procedure/read_person/fetching_properties/step> .

<https://vivoweb.org/procedure/read_person/fetching_properties/step>
        a                        	        dynapi:OperationalStep ;
        rdfs:label               	        "reading of a person"@en-US ;
        dynapi:hasOperation 		        <https://vivoweb.org/procedure/read_person/fetching_properties/sparql_query> .

<https://vivoweb.org/procedure/read_person/fetching_properties/sparql_query>
        a                                       dynapi:SparqlSelectQuery ;
        rdfs:label                              "read person sparql query 1"@en-US ;
        dynapi:hasModel 		        <https://vivoweb.org/ontology/vitro-dynamic-api/model/full_union> ;
        dynapi:requiresParameter 	        <https://vivoweb.org/procedure/person/parameter/resource_id> ;
        dynapi:providesParameter 	        <https://vivoweb.org/ontology/person/parameter/persons> ;
        dynapi:sparqlQueryText
        """
        SELECT ?uri ?type ?label ?first_name ?middle_name ?last_name ?internalID ?ORCID ?SCOPUSAuthorID ?ResearcherID ?positionURI ?organizationUnitURI ?positionName ?positionType ?startDate ?endDate
        WHERE {
                ?uri a <http://xmlns.com/foaf/0.1/Person> .
                OPTIONAL { ?uri <http://www.w3.org/2006/vcard/ns#givenName> ?first_name }
                OPTIONAL { ?uri <http://vivoweb.org/ontology/core#middleName> ?middle_name }
                OPTIONAL { ?uri <http://www.w3.org/2006/vcard/ns#familyName> ?last_name }
                OPTIONAL { ?uri <http://www.w3.org/2000/01/rdf-schema#label> ?label }
                OPTIONAL { ?uri <http://vivoweb.org/ontology/core#identifier> ?internalID }
                OPTIONAL { ?uri <http://vivoweb.org/ontology/core#orcidId> ?ORCID }
                OPTIONAL { ?uri <http://vivoweb.org/ontology/core#scopusId> ?SCOPUSAuthorID }
                OPTIONAL { ?uri <http://vivoweb.org/ontology/core#researcherId> ?ResearcherID }
                OPTIONAL {
                        ?uri <http://vivoweb.org/ontology/core#Position> ?positionURI .
                        ?positionURI <http://xmlns.com/foaf/0.1/Organization> ?organizationUnitURI .
                        ?positionURI <http://vivoweb.org/ontology/core#positionInOrganization> ?positionName .
                        ?positionURI <http://vivoweb.org/ontology/core#Position> ?positionType .
                        ?positionURI <http://vivoweb.org/ontology/core#start> ?startDate .
                        ?positionURI <http://vivoweb.org/ontology/core#end> ?endDate .
                }
                FILTER (?uri = ?resource_id)
        }
        LIMIT 1

        """ .

###############################################
### DELETE
###############################################

<https://vivoweb.org/procedure/delete_person>
        a                                       dynapi:Procedure ;
        rdfs:label                              "Deleting a person"@en-US ;
        dynapi:accessWhitelist                  <https://vivoweb.org/procedure/person/access/admin> ;
        dynapi:hasFirstStep                     <https://vivoweb.org/procedure/delete_person/get_person_from_dynamic_api_graph/step> .

<https://vivoweb.org/procedure/delete_person/get_person_from_dynamic_api_graph/step>
        a                                       dynapi:OperationalStep ;
        dynapi:hasNextStep                      <https://vivoweb.org/procedure/delete_person/remove_from_dynamic_api_model/step> ;
        dynapi:hasOperation                     <https://vivoweb.org/procedure/delete_person/get_person_from_dynamic_api_graph/operation> .

<https://vivoweb.org/procedure/delete_person/get_person_from_dynamic_api_graph/operation>
         a                                   dynapi:SparqlConstructQuery ;
         dynapi:sparqlQueryText              """
         prefix dynapi: <https://vivoweb.org/ontology/vitro-dynamic-api#>
         prefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
         prefix rdfs:  <http://www.w3.org/2000/01/rdf-schema#>
         prefix xsd: <http://www.w3.org/2001/XMLSchema#>
         CONSTRUCT { 
                 ?resource_id 
                 rdf:type <http://xmlns.com/foaf/0.1/Person> ;
                 <http://www.w3.org/2006/vcard/ns#givenName> ?first_name ;
                 <http://vivoweb.org/ontology/core#middleName> ?middle_name ;
                 <http://www.w3.org/2006/vcard/ns#familyName> ?last_name ;
                 <http://www.w3.org/2000/01/rdf-schema#label> ?label ;
                 <http://vitro.mannlib.cornell.edu/ns/vitro/0.7#mostSpecificType> ?type ;
                 <http://vivoweb.org/ontology/core#identifier> ?internalID ;
                 <http://vivoweb.org/ontology/core#orcidId> ?ORCID ;
                 <http://vivoweb.org/ontology/core#scopusId> ?SCOPUSAuthorID ;
                 <http://vivoweb.org/ontology/core#researcherId> ?ResearcherID .
                 
         } WHERE {
                ?resource_id rdf:type <http://xmlns.com/foaf/0.1/Person>
                OPTIONAL { ?resource_id <http://www.w3.org/2006/vcard/ns#givenName> ?first_name }
                OPTIONAL { ?resource_id <http://vivoweb.org/ontology/core#middleName> ?middle_name }
                OPTIONAL { ?resource_id <http://www.w3.org/2006/vcard/ns#familyName> ?last_name }
                OPTIONAL { ?resource_id <http://www.w3.org/2000/01/rdf-schema#label> ?label }
                OPTIONAL { ?resource_id <http://vitro.mannlib.cornell.edu/ns/vitro/0.7#mostSpecificType> ?type }
                OPTIONAL { ?resource_id <http://vivoweb.org/ontology/core#identifier> ?internalID }
                OPTIONAL { ?resource_id <http://vivoweb.org/ontology/core#orcidId> ?ORCID }
                OPTIONAL { ?resource_id <http://vivoweb.org/ontology/core#scopusId> ?SCOPUSAuthorID }
                OPTIONAL { ?resource_id <http://vivoweb.org/ontology/core#researcherId> ?ResearcherID }
         } 
         """ ;
         dynapi:providesParameter               <https://vivoweb.org/procedure/delete_person/parameter/person_graph> ;
         dynapi:requiresParameter               <https://vivoweb.org/procedure/person/parameter/resource_id> ;
         dynapi:hasModel                        <https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> .

<https://vivoweb.org/procedure/delete_person/remove_from_dynamic_api_model/step>
        a                                       dynapi:OperationalStep ;
        dynapi:hasNextStep                      <https://vivoweb.org/procedure/delete_person/unload_procedure_from_procedure_pool/step> ;
        dynapi:hasOperation                     <https://vivoweb.org/procedure/delete_person/remove_from_dynamic_api_model/operation> .

<https://vivoweb.org/procedure/delete_person/remove_from_dynamic_api_model/operation>
        a                                       dynapi:ModelWriter ;
        dynapi:retractionModel                  <https://vivoweb.org/procedure/delete_person/parameter/person_graph> ;
        dynapi:targetModel                      <https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> .

<https://vivoweb.org/procedure/delete_person/unload_procedure_from_procedure_pool/step>
        a                                       dynapi:OperationalStep ;
        dynapi:hasOperation                     <https://vivoweb.org/procedure/delete_person/unload_procedure_from_procedure_pool/operation> .

<https://vivoweb.org/procedure/delete_person/unload_procedure_from_procedure_pool/operation>
        a                                       dynapi:ProcedurePoolAtomicOperation ;
        dynapi:poolOperationType                "unload" ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/resource_id> .

###############################################
### UPDATE
###############################################

<https://vivoweb.org/procedure/update_person>
        a                                       dynapi:Procedure ;
        rdfs:label                              "Updating a person"@en-US ;
        dynapi:accessWhitelist                  <https://vivoweb.org/procedure/person/access/admin> ;
        dynapi:hasFirstStep                     <https://vivoweb.org/procedure/update_person/get_person_from_dynamic_api_graph/step> .

<https://vivoweb.org/procedure/update_person/get_person_from_dynamic_api_graph/step>
        a                                       dynapi:OperationalStep ;
        dynapi:hasNextStep                      <https://vivoweb.org/procedure/update_person/remove_from_dynamic_api_model/step> ;
        dynapi:hasOperation                     <https://vivoweb.org/procedure/delete_person/get_person_from_dynamic_api_graph/operation> .

<https://vivoweb.org/procedure/update_person/remove_from_dynamic_api_model/step>
        a                                       dynapi:OperationalStep ;
        dynapi:hasNextStep                      <https://vivoweb.org/procedure/update_person/unload_procedure_from_procedure_pool/step> ;
        dynapi:hasOperation                     <https://vivoweb.org/procedure/update_person/remove_from_dynamic_api_model/operation> .

<https://vivoweb.org/procedure/update_person/remove_from_dynamic_api_model/operation>
        a                                       dynapi:ModelWriter ;
        dynapi:retractionModel                  <https://vivoweb.org/procedure/delete_person/parameter/person_graph> ;
        dynapi:targetModel                      <https://vivoweb.org/ontology/vitro-dynamic-api/model/abox_assertions> .

<https://vivoweb.org/procedure/update_person/unload_procedure_from_procedure_pool/step>
        a                                       dynapi:OperationalStep ;
        dynapi:hasNextStep                      <https://vivoweb.org/procedure/update_person/creation_properties/step1> ;
        dynapi:hasOperation                     <https://vivoweb.org/procedure/update_person/unload_procedure_from_procedure_pool/operation> .

<https://vivoweb.org/procedure/update_person/unload_procedure_from_procedure_pool/operation>
        a                                       dynapi:ProcedurePoolAtomicOperation ;
        dynapi:poolOperationType                "unload" ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/resource_id> .

<https://vivoweb.org/procedure/update_person/creation_properties/step1>
        a                        		dynapi:OperationalStep ;
        rdfs:label               		"creation of a person step 1"@en-US ;
        dynapi:hasOperation 			<https://vivoweb.org/procedure/update_person/execute_template/n3_template_subject> ;
	dynapi:hasNextStep			<https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step2> .

<https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step2>
        a                                       dynapi:ConditionalStep ;
        rdfs:label                              "conditional step for person first name check"@en-US ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/update_person/creation_properties/step2> ;
        dynapi:nextIfNotSatisfied               <https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step3> ;
        dynapi:hasCondition                     <https://vivoweb.org/condition/person/first_name_check> .

<https://vivoweb.org/procedure/update_person/creation_properties/step2>
        a                        		dynapi:OperationalStep ;
        rdfs:label               		"creation of a person step 2"@en-US ;
        dynapi:hasOperation 			<https://vivoweb.org/procedure/update_person/execute_template/n3_template_first_name> ;
	dynapi:hasNextStep			<https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step3> .

<https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step3>
        a                                       dynapi:ConditionalStep ;
        rdfs:label                              "conditional step for person middle name check"@en-US ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/update_person/creation_properties/step3> ;
        dynapi:nextIfNotSatisfied               <https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step4> ;
        dynapi:hasCondition                     <https://vivoweb.org/condition/person/middle_name_check> .

<https://vivoweb.org/procedure/update_person/creation_properties/step3>
        a                        		dynapi:OperationalStep ;
        rdfs:label               		"creation of a person step 3"@en-US ;
        dynapi:hasOperation 			<https://vivoweb.org/procedure/update_person/execute_template/n3_template_middle_name> ;
	dynapi:hasNextStep			<https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step4> .

<https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step4>
        a                                       dynapi:ConditionalStep ;
        rdfs:label                              "conditional step for person last name check"@en-US ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/update_person/creation_properties/step4> ;
        dynapi:nextIfNotSatisfied               <https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step5> ;
        dynapi:hasCondition                     <https://vivoweb.org/condition/person/last_name_check> .

<https://vivoweb.org/procedure/update_person/creation_properties/step4>
        a                        		dynapi:OperationalStep ;
        rdfs:label               		"creation of a person step 4"@en-US ;
        dynapi:hasOperation 			<https://vivoweb.org/procedure/update_person/execute_template/n3_template_last_name> ;
	dynapi:hasNextStep			<https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step5> .

<https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step5>
        a                                       dynapi:ConditionalStep ;
        rdfs:label                              "conditional step for person type check"@en-US ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/update_person/creation_properties/step5> ;
        dynapi:nextIfNotSatisfied               <https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step6> ;
        dynapi:hasCondition                     <https://vivoweb.org/condition/person/type_check> .

<https://vivoweb.org/procedure/update_person/creation_properties/step5>
        a                        		dynapi:OperationalStep ;
        rdfs:label               		"creation of a person step 5"@en-US ;
        dynapi:hasOperation 			<https://vivoweb.org/procedure/update_person/execute_template/n3_template_type> ;
	dynapi:hasNextStep			<https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step6> .

<https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step6>
        a                                       dynapi:ConditionalStep ;
        rdfs:label                              "conditional step for person internal id check"@en-US ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/update_person/creation_properties/step6> ;
        dynapi:nextIfNotSatisfied               <https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step7> ;
        dynapi:hasCondition                     <https://vivoweb.org/condition/person/internal_id_check> .

<https://vivoweb.org/procedure/update_person/creation_properties/step6>
        a                        		dynapi:OperationalStep ;
        rdfs:label               		"creation of a person step 6"@en-US ;
        dynapi:hasOperation 			<https://vivoweb.org/procedure/update_person/execute_template/n3_template_internal_id> ;
	dynapi:hasNextStep			<https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step7> .

<https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step7>
        a                                       dynapi:ConditionalStep ;
        rdfs:label                              "conditional step for person ORCID check"@en-US ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/update_person/creation_properties/step7> ;
        dynapi:nextIfNotSatisfied               <https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step8> ;
        dynapi:hasCondition                     <https://vivoweb.org/condition/person/orcid_check> .

<https://vivoweb.org/procedure/update_person/creation_properties/step7>
        a                        		dynapi:OperationalStep ;
        rdfs:label               		"creation of a person step 7"@en-US ;
        dynapi:hasOperation 			<https://vivoweb.org/procedure/update_person/execute_template/n3_template_orcid> ;
	dynapi:hasNextStep			<https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step8> .

<https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step8>
        a                                       dynapi:ConditionalStep ;
        rdfs:label                              "conditional step for person first name check"@en-US ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/update_person/creation_properties/step8> ;
        dynapi:nextIfNotSatisfied               <https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step9> ;
        dynapi:hasCondition                     <https://vivoweb.org/condition/person/scopus_author_id_check> .

<https://vivoweb.org/procedure/update_person/creation_properties/step8>
        a                        		dynapi:OperationalStep ;
        rdfs:label               		"creation of a person step 8"@en-US ;
        dynapi:hasOperation 			<https://vivoweb.org/procedure/update_person/execute_template/n3_template_scopus_id> ;
	dynapi:hasNextStep			<https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step9> .

<https://vivoweb.org/procedure/update_person/creation_properties/conditional_for_step9>
        a                                       dynapi:ConditionalStep ;
        rdfs:label                              "conditional step for person first name check"@en-US ;
        dynapi:nextIfSatisfied                  <https://vivoweb.org/procedure/update_person/creation_properties/step9> ;
        dynapi:hasCondition                     <https://vivoweb.org/condition/person/researcher_id_check> .

<https://vivoweb.org/procedure/update_person/creation_properties/step9>
        a                        		dynapi:OperationalStep ;
        rdfs:label               		"creation of a person step 9"@en-US ;
        dynapi:hasOperation 			<https://vivoweb.org/procedure/update_person/execute_template/n3_template_researcher_id> .

###############################################
### PARAMETERS
###############################################

#####################
## Person response ##
#####################

<https://vivoweb.org/ontology/person/parameter/persons>
        a                                       dynapi:Parameter ;
        rdfs:label                              "persons"@en-US ;
        dynapi:name                             "persons" ;
        dynapi:description                      "List of available persons and statistics (number)" ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/JsonContainerArray> .

<https://vivoweb.org/ontology/person/parameter/count>
        a                                       dynapi:Parameter ;
        rdfs:label                              "Number of fetched persons"@en-US ;
        dynapi:name                             "count" ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/JsonContainer> .

######################
## Iteration params ##
######################

<https://vivoweb.org/procedure/create_person/parameter/iteration_int_param>
        a                                       dynapi:Parameter ;
        dynapi:name                             "iteration_param" ;
        dynapi:defaultValue                     "0" ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/integer> .

<https://vivoweb.org/procedure/create_person/parameter/iteration_increment_param>
        a                                       dynapi:Parameter ;
        dynapi:name                             "int_1" ;
        dynapi:defaultValue                     "1" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/integer> .

<https://vivoweb.org/parameter/default_condition_0_int>
        a                                       dynapi:Parameter ;
        dynapi:name                             "condition_result" ;
        dynapi:defaultValue                     "0" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/integer> .
        
<https://vivoweb.org/parameter/expected_int_result_1>
        a                                       dynapi:Parameter ;
        dynapi:name                             "condition_result" ;
        dynapi:defaultValue                     "1" ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/integer> .

<https://vivoweb.org/parameter/add_int_1_param>
        a                                       dynapi:Parameter ;
        dynapi:name                             "int_1" ;
        dynapi:defaultValue                     "1" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/integer> .

<https://vivoweb.org/procedure/create_person_position/parameter/current_step_uri>
        a                                       dynapi:Parameter ;
        dynapi:name                             "current_step_uri" ;
        dynapi:defaultValue                     "https://vivoweb.org/procedure/person_position/,java_uuid_number" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/generated-uri> .

#####################
## Creation fields ##
#####################

<https://vivoweb.org/procedure/person/parameter/current_uri_persisted>
        a                                       dynapi:Parameter ;
        dynapi:name                             "current_uri_persisted" ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/uri> .

<https://vivoweb.org/procedure/person/parameter/uri>
        a                                       dynapi:Parameter ;
        dynapi:name                             "uri" ;
        dynapi:defaultValue                     "http://xmlns.com/foaf/0.1/Person#,java_uuid_number" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/generated-uri> .

<https://vivoweb.org/procedure/person/parameter/label>
        a                                       dynapi:Parameter ;
        dynapi:name                             "label" ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/string-literal> .

<https://vivoweb.org/procedure/person/parameter/first_name>
        a                                       dynapi:Parameter ;
        dynapi:name                             "first_name" ;
        dynapi:defaultValue                     "" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:isOptionalParam                  "true"^^xsd:boolean ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/string-literal> .

<https://vivoweb.org/procedure/person/parameter/middle_name>
        a                                       dynapi:Parameter ;
        dynapi:name                             "middle_name" ;
        dynapi:defaultValue                     "" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:isOptionalParam                  "true"^^xsd:boolean ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/string-literal> .

<https://vivoweb.org/procedure/person/parameter/last_name>
        a                                       dynapi:Parameter ;
        dynapi:name                             "last_name" ;
        dynapi:defaultValue                     "" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:isOptionalParam                  "true"^^xsd:boolean ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/string-literal> .

<https://vivoweb.org/procedure/person/parameter/type>
        a                                       dynapi:Parameter ;
        dynapi:name                             "type" ;
        dynapi:defaultValue                     "" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:isOptionalParam                  "true"^^xsd:boolean ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/uri> .

<https://vivoweb.org/procedure/person/parameter/container/positions>
        a                                       dynapi:Parameter ;
        dynapi:name                             "positions" ;
        dynapi:defaultValue                     "[]" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:isOptionalParam                  "true"^^xsd:boolean ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/JsonContainerArray> .

<https://vivoweb.org/procedure/person/parameter/internalID>
        a                                       dynapi:Parameter ;
        dynapi:name                             "internalID" ;
        dynapi:defaultValue                     "" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:isOptionalParam                  "true"^^xsd:boolean ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/string-literal> .

<https://vivoweb.org/procedure/person/parameter/ORCID>
        a                                       dynapi:Parameter ;
        dynapi:name                             "ORCID" ;
        dynapi:defaultValue                     "" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:isOptionalParam                  "true"^^xsd:boolean ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/string-literal> .

<https://vivoweb.org/procedure/person/parameter/SCOPUSAuthorID>
        a                                       dynapi:Parameter ;
        dynapi:name                             "SCOPUSAuthorID" ;
        dynapi:defaultValue                     "" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:isOptionalParam                  "true"^^xsd:boolean ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/string-literal> .

<https://vivoweb.org/procedure/person/parameter/ResearcherID>
        a                                       dynapi:Parameter ;
        dynapi:name                             "ResearcherID" ;
        dynapi:defaultValue                     "" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:isOptionalParam                  "true"^^xsd:boolean ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/string-literal> .

<https://vivoweb.org/procedure/get_position_from_container/parameter/container_positions_item>
        a                                       dynapi:Parameter ;
        dynapi:name                             "item" ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/JsonContainer> .

#########################
## Read request fields ##
#########################

<https://vivoweb.org/procedure/person/parameter/resource_id>
        a                                       dynapi:Parameter ;
        dynapi:name                             "resource_id" ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/uri> ;
        rdfs:label                              "resource uri"@en-US .

<https://vivoweb.org/ontology/person/parameter/total>
        a                                       dynapi:parameter ;
        dynapi:name                             "total" ;
        dynapi:hasType 		                <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/integer> ;
        rdfs:label                              "total"@en-US .

<https://vivoweb.org/ontology/person/parameter/limit>
        a                                       dynapi:parameter ;
        dynapi:name                             "limit" ;
        dynapi:defaultValue                     "20" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:isOptionalParam                  "true"^^xsd:boolean ;
        dynapi:hasType 		                <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/integer> ;
        rdfs:label                              "limit"@en-US .

<https://vivoweb.org/ontology/person/parameter/offset>
        a                                       dynapi:parameter ;
        dynapi:name                             "offset" ;
        dynapi:defaultValue                     "0" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:isOptionalParam                  "true"^^xsd:boolean ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/integer> ;
        rdfs:label                              "offset"@en-US .

<https://vivoweb.org/ontology/person/parameter/sortBy>
        a                                       dynapi:parameter ;
        dynapi:name                             "sortBy" ;
        dynapi:defaultValue                     "label" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:isOptionalParam                  "true"^^xsd:boolean ;
        dynapi:hasType 		                <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/string> ;
        rdfs:label                              "sortBy"@en-US .

<https://vivoweb.org/ontology/person/parameter/order>
        a                                       dynapi:parameter ;
        dynapi:name                             "order" ;
        dynapi:defaultValue                     "ASC" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:isOptionalParam                  "true"^^xsd:boolean ;
        dynapi:hasType 		                <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/string> ;
        rdfs:label                              "order"@en-US .

###########################
## Delete request fields ##
###########################

<https://vivoweb.org/procedure/delete_person/parameter/person_graph>
        a                                       dynapi:Model ;
        dynapi:name                             "person_graph" ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/model> .

###############################################
### POSITION FIELDS
###############################################

# Internal

<https://vivoweb.org/procedure/create_person_position/parameter/organizationUnitURI_key>
        a                                   dynapi:Parameter ;
        dynapi:name                         "organizationUnitURI_key" ;
        dynapi:isInternal                   "true"^^xsd:boolean ;
        dynapi:defaultValue                 "organizationUnitURI" ;
        dynapi:hasType                      <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/string> .

<https://vivoweb.org/procedure/create_person_position/parameter/organizationUnitName_key>
        a                                   dynapi:Parameter ;
        dynapi:name                         "organizationUnitName_key" ;
        dynapi:isInternal                   "true"^^xsd:boolean ;
        dynapi:defaultValue                 "organizationUnitName" ;
        dynapi:hasType                      <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/string> .

<https://vivoweb.org/procedure/create_person_position/parameter/positionName_key>
        a                                   dynapi:Parameter ;
        dynapi:name                         "positionName_key" ;
        dynapi:isInternal                   "true"^^xsd:boolean ;
        dynapi:defaultValue                 "positionName" ;
        dynapi:hasType                      <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/string> .

<https://vivoweb.org/procedure/create_person_position/parameter/positionType_key>
        a                                   dynapi:Parameter ;
        dynapi:name                         "positionType_key" ;
        dynapi:isInternal                   "true"^^xsd:boolean ;
        dynapi:defaultValue                 "positionType" ;
        dynapi:hasType                      <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/string> .

<https://vivoweb.org/procedure/create_person_position/parameter/startDate_key>
        a                                   dynapi:Parameter ;
        dynapi:name                         "startDate_key" ;
        dynapi:isInternal                   "true"^^xsd:boolean ;
        dynapi:defaultValue                 "startDate" ;
        dynapi:hasType                      <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/string> .

<https://vivoweb.org/procedure/create_person_position/parameter/endDate_key>
        a                                   dynapi:Parameter ;
        dynapi:name                         "endDate_key" ;
        dynapi:isInternal                   "true"^^xsd:boolean ;
        dynapi:defaultValue                 "endDate" ;
        dynapi:hasType                      <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/string> .

# Provided

<https://vivoweb.org/procedure/position/parameter/organizationUnitURI>
        a                                       dynapi:Parameter ;
        dynapi:name                             "organizationUnitURI" ;
        dynapi:defaultValue                     "" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:isOptionalParam                  "true"^^xsd:boolean ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/uri> .

<https://vivoweb.org/procedure/position/parameter/organizationUnitName>
        a                                       dynapi:Parameter ;
        dynapi:name                             "organizationUnitName" ;
        dynapi:defaultValue                     "" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:isOptionalParam                  "true"^^xsd:boolean ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/string-literal> .

<https://vivoweb.org/procedure/position/parameter/positionName>
        a                                       dynapi:Parameter ;
        dynapi:name                             "positionName" ;
        dynapi:defaultValue                     "" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:isOptionalParam                  "true"^^xsd:boolean ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/string-literal> .

<https://vivoweb.org/procedure/position/parameter/positionType>
        a                                       dynapi:Parameter ;
        dynapi:name                             "positionType" ;
        dynapi:defaultValue                     "" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:isOptionalParam                  "true"^^xsd:boolean ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/string-literal> .

<https://vivoweb.org/procedure/position/parameter/startDate>
        a                                       dynapi:Parameter ;
        dynapi:name                             "startDate" ;
        dynapi:defaultValue                     "" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:isOptionalParam                  "true"^^xsd:boolean ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/string-literal> .

<https://vivoweb.org/procedure/position/parameter/endDate>
        a                                       dynapi:Parameter ;
        dynapi:name                             "endDate" ;
        dynapi:defaultValue                     "" ;
        dynapi:isInternal                       "true"^^xsd:boolean ;
        dynapi:isOptionalParam                  "true"^^xsd:boolean ;
        dynapi:hasType                          <https://vivoweb.org/ontology/vitro-dynamic-api/parameter/type/string-literal> .

###############################################
### PARAMETER CHECKS
###############################################

# Person attributes

<https://vivoweb.org/condition/person/first_name_check>
        a                                       dynapi:ConditionIsNotEmpty ;
        rdfs:label                              "condition if person first name is defined"@en-US ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/first_name> .

<https://vivoweb.org/condition/person/middle_name_check>
        a                                       dynapi:ConditionIsNotEmpty ;
        rdfs:label                              "condition if person middle name is defined"@en-US ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/middle_name> .

<https://vivoweb.org/condition/person/last_name_check>
        a                                       dynapi:ConditionIsNotEmpty ;
        rdfs:label                              "condition if person last name is defined"@en-US ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/last_name> .

<https://vivoweb.org/condition/person/type_check>
        a                                       dynapi:ConditionIsNotEmpty ;
        rdfs:label                              "condition if person type is defined"@en-US ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/type> .

<https://vivoweb.org/condition/person/internal_id_check>
        a                                       dynapi:ConditionIsNotEmpty ;
        rdfs:label                              "condition if person internal ID is defined"@en-US ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/internalID> .

<https://vivoweb.org/condition/person/orcid_check>
        a                                       dynapi:ConditionIsNotEmpty ;
        rdfs:label                              "condition if person ORCID is defined"@en-US ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/ORCID> .

<https://vivoweb.org/condition/person/scopus_author_id_check>
        a                                       dynapi:ConditionIsNotEmpty ;
        rdfs:label                              "condition if person SCOPUS author id is defined"@en-US ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/SCOPUSAuthorID> .

<https://vivoweb.org/condition/person/researcher_id_check>
        a                                       dynapi:ConditionIsNotEmpty ;
        rdfs:label                              "condition if person researcher ID is defined"@en-US ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/ResearcherID> .

<https://vivoweb.org/condition/person/positions_check>
        a                                       dynapi:ConditionIsNotEmpty ;
        rdfs:label                              "condition if person positions are defined"@en-US ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/person/parameter/container/positions> .

# Person position container keys

<https://vivoweb.org/procedure/contains_organisation_unit_uri_key/condition_container_contains> 
        a                                       dynapi:ConditionContainerContains ;
        dynapi:targetContainer                  <https://vivoweb.org/procedure/get_position_from_container/parameter/container_positions_item> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/create_person_position/parameter/organizationUnitURI_key> .

<https://vivoweb.org/procedure/contains_organisation_unit_name_key/condition_container_contains> 
        a                                       dynapi:ConditionContainerContains ;
        dynapi:targetContainer                  <https://vivoweb.org/procedure/get_position_from_container/parameter/container_positions_item> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/create_person_position/parameter/organizationUnitName_key> .

<https://vivoweb.org/procedure/contains_position_name_key/condition_container_contains> 
        a                                       dynapi:ConditionContainerContains ;
        dynapi:targetContainer                  <https://vivoweb.org/procedure/get_position_from_container/parameter/container_positions_item> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/create_person_position/parameter/positionName_key> .

<https://vivoweb.org/procedure/contains_position_type_key/condition_container_contains> 
        a                                       dynapi:ConditionContainerContains ;
        dynapi:targetContainer                  <https://vivoweb.org/procedure/get_position_from_container/parameter/container_positions_item> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/create_person_position/parameter/positionType_key> .

<https://vivoweb.org/procedure/contains_start_date_key/condition_container_contains> 
        a                                       dynapi:ConditionContainerContains ;
        dynapi:targetContainer                  <https://vivoweb.org/procedure/get_position_from_container/parameter/container_positions_item> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/create_person_position/parameter/startDate_key> .

<https://vivoweb.org/procedure/contains_end_date_key/condition_container_contains> 
        a                                       dynapi:ConditionContainerContains ;
        dynapi:targetContainer                  <https://vivoweb.org/procedure/get_position_from_container/parameter/container_positions_item> ;
        dynapi:requiresParameter                <https://vivoweb.org/procedure/create_person_position/parameter/endDate_key> .

###############################################
### ACCESS CONTROL
###############################################

<https://vivoweb.org/procedure/person/access/admin>
        a                                       dynapi:GroupAccessWhitelist ;
        dynapi:userGroup                        <https://vivoweb.org/ontology/vitro-dynamic-api/user-group/admin> .
